
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../lammps/">
      
      
        <link rel="next" href="../namd/">
      
      
      <link rel="icon" href="../../favicon.ico">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.15">
    
    
      
        <title>MATLAB - Cirrus User Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.7e359304.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/cirrus.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-3T9RVR5FTP"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-3T9RVR5FTP",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-3T9RVR5FTP",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="teal">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#matlab" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Cirrus User Documentation" class="md-header__button md-logo" aria-label="Cirrus User Documentation" data-md-component="logo">
      
  <img src="../../images/cirrus_logo_white-Transparent-Background.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Cirrus User Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              MATLAB
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/EPCCed/cirrus-docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    EPCCed/cirrus-docs
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Cirrus User Documentation" class="md-nav__button md-logo" aria-label="Cirrus User Documentation" data-md-component="logo">
      
  <img src="../../images/cirrus_logo_white-Transparent-Background.png" alt="logo">

    </a>
    Cirrus User Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/EPCCed/cirrus-docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    EPCCed/cirrus-docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../e1000-migration" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cirrus migration to E1000 system
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    User Guide
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            User Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/introduction/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/connecting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Connecting to Cirrus
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/data/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Data Management and Transfer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/resource_management/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    File and Resource Management
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/development/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Application Development Environment
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/batch/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Running Jobs on Cirrus
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/singularity/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Singularity Containers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/python/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Using Python
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/gpu/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Using the Cirrus GPU Nodes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/solidstate/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Solid state storage
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Software Applications
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Software Applications
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../castep/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Castep
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cp2k/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CP2K
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../elements/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ELEMENTS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../flacs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    FLACS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../gaussian/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Gaussian
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../gromacs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    GROMACS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../helyx/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HELYX&reg;
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lammps/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LAMMPS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    MATLAB
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    MATLAB
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#useful-links" class="md-nav__link">
    <span class="md-ellipsis">
      Useful Links
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-matlab-on-cirrus" class="md-nav__link">
    <span class="md-ellipsis">
      Using MATLAB on Cirrus
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-matlab-jobs" class="md-nav__link">
    <span class="md-ellipsis">
      Running MATLAB jobs
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-parallel-matlab-jobs-using-the-local-cluster" class="md-nav__link">
    <span class="md-ellipsis">
      Running parallel MATLAB jobs using the local cluster
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#matlab-2019-versions" class="md-nav__link">
    <span class="md-ellipsis">
      MATLAB 2019 versions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-parallel-matlab-jobs-using-mdcs" class="md-nav__link">
    <span class="md-ellipsis">
      Running parallel MATLAB jobs using MDCS
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Running parallel MATLAB jobs using MDCS">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuring-jobs" class="md-nav__link">
    <span class="md-ellipsis">
      Configuring jobs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#interactive-jobs" class="md-nav__link">
    <span class="md-ellipsis">
      Interactive jobs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#serial-jobs" class="md-nav__link">
    <span class="md-ellipsis">
      Serial jobs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parallel-jobs" class="md-nav__link">
    <span class="md-ellipsis">
      Parallel jobs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#debugging" class="md-nav__link">
    <span class="md-ellipsis">
      Debugging
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#to-learn-more" class="md-nav__link">
    <span class="md-ellipsis">
      To learn more
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#gpus" class="md-nav__link">
    <span class="md-ellipsis">
      GPUs
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../namd/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    NAMD
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../openfoam/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OpenFOAM
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../orca/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ORCA
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../qe/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Quantum Espresso (QE)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../starccm%2B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    STAR-CCM+
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../vasp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    VASP
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Software Libraries
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Software Libraries
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software-libraries/intel_mkl/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Intel MKL: BLAS, LAPACK, ScaLAPACK
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software-libraries/hdf5/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HDF5
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Software Tools
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Software Tools
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software-tools/ddt/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Debugging using Linaro DDT
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software-tools/scalasca/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Profiling using Scalasca
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software-tools/intel-vtune/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Intel VTune
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/reading/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    References and further reading
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#useful-links" class="md-nav__link">
    <span class="md-ellipsis">
      Useful Links
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-matlab-on-cirrus" class="md-nav__link">
    <span class="md-ellipsis">
      Using MATLAB on Cirrus
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-matlab-jobs" class="md-nav__link">
    <span class="md-ellipsis">
      Running MATLAB jobs
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-parallel-matlab-jobs-using-the-local-cluster" class="md-nav__link">
    <span class="md-ellipsis">
      Running parallel MATLAB jobs using the local cluster
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#matlab-2019-versions" class="md-nav__link">
    <span class="md-ellipsis">
      MATLAB 2019 versions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-parallel-matlab-jobs-using-mdcs" class="md-nav__link">
    <span class="md-ellipsis">
      Running parallel MATLAB jobs using MDCS
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Running parallel MATLAB jobs using MDCS">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuring-jobs" class="md-nav__link">
    <span class="md-ellipsis">
      Configuring jobs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#interactive-jobs" class="md-nav__link">
    <span class="md-ellipsis">
      Interactive jobs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#serial-jobs" class="md-nav__link">
    <span class="md-ellipsis">
      Serial jobs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parallel-jobs" class="md-nav__link">
    <span class="md-ellipsis">
      Parallel jobs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#debugging" class="md-nav__link">
    <span class="md-ellipsis">
      Debugging
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#to-learn-more" class="md-nav__link">
    <span class="md-ellipsis">
      To learn more
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#gpus" class="md-nav__link">
    <span class="md-ellipsis">
      GPUs
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="matlab">MATLAB</h1>
<p><a href="https://uk.mathworks.com">MATLAB</a> combines a desktop environment tuned
for iterative analysis and design processes with a programming language
that expresses matrix and array mathematics directly.</p>
<h2 id="useful-links">Useful Links</h2>
<ul>
<li><a href="https://uk.mathworks.com/help/index.html">MATLAB Documentation</a></li>
</ul>
<h2 id="using-matlab-on-cirrus">Using MATLAB on Cirrus</h2>
<p>MATLAB R2020b and R2021b are available on Cirrus. R2020b is the 
current default.</p>
<p>This installation of MATLAB on Cirrus is covered by an Academic
License - for use in teaching, academic research, and meeting course
requirements at degree granting institutions only. Not for government,
commercial, or other organizational use.</p>
<p><strong>If your use of MATLAB is not covered by this license then please do
not use this installation.</strong> Please contact the <a href="http://www.cirrus.ac.uk/support/">Cirrus
Helpdesk</a> to arrange use of your own
MATLAB license on Cirrus.</p>
<p>Detailed version information:</p>
<div class="highlight"><pre><span></span><code>-----------------------------------------------------------------------------------------------------
MATLAB Version: 9.9.0.2037887 (R2020b) Update 8
MATLAB License Number: 904098
Operating System: Linux 4.18.0-305.25.1.el8_4.x86_64 #1 SMP Mon Oct 18 14:34:11 EDT 2021 x86_64
Java Version: Java 1.8.0_202-b08 with Oracle Corporation Java HotSpot(TM) 64-Bit Server VM mixed mode
-----------------------------------------------------------------------------------------------------
MATLAB                                                Version 9.9         (R2020b)
Simulink                                              Version 10.2        (R2020b)
DSP System Toolbox                                    Version 9.11        (R2020b)
Deep Learning HDL Toolbox                             Version 1.0         (R2020b)
Deep Learning Toolbox                                 Version 14.1        (R2020b)
Image Processing Toolbox                              Version 11.2        (R2020b)
Parallel Computing Toolbox                            Version 7.3         (R2020b)
Signal Processing Toolbox                             Version 8.5         (R2020b)
Statistics and Machine Learning Toolbox               Version 12.0        (R2020b)
Symbolic Math Toolbox                                 Version 8.6         (R2020b)
Wavelet Toolbox                                       Version 5.5         (R2020b)
</code></pre></div>
<h2 id="running-matlab-jobs">Running MATLAB jobs</h2>
<p>On Cirrus, MATLAB is intended to be used on the compute nodes within
Slurm job scripts. Use on the login nodes should be restricted to
setting preferences, accessing help, and launching MDCS jobs. It is
recommended that MATLAB is used without a GUI on the compute nodes, as
the interactive response is slow.</p>
<h2 id="running-parallel-matlab-jobs-using-the-local-cluster">Running parallel MATLAB jobs using the <em>local</em> cluster</h2>
<p>The license for this installation of MATLAB provides only 32 workers via
MDCS but provides 36 workers via the local cluster profile (there are 36
cores on a Cirrus compute node), so we only recommend the use of MDCS to
test the configuration of distributed memory parallel computations for
eventual use of your own MDCS license.</p>
<p>The <em>local</em> cluster should be used within a Slurm job script - you
submit a job that runs MATLAB and uses the <em>local</em> cluster, which is the
compute node that the job is running on.</p>
<p>MATLAB will normally use up to the total number of cores on a node for
multi-threaded operations (e.g. matrix inversions) and for parallel
computations. It also make no restriction on its memory use. These
features are incompatible with the shared use of nodes on Cirrus. For
the <em>local</em> cluster, a wrapper script is provided to limit the number of
cores and amount of memory used, in proportion to the number of CPUs
selected in the Slurm job script. Please use this wrapper instead of
using MATLAB directly.</p>
<p>Say you have a job that requires 3 workers, each running 2 threads. As
such, you should employ 3x2=6 cores. An example job script for this
particular case would be :</p>
<div class="highlight"><pre><span></span><code><span class="c1">#SBATCH --job-name=Example_MATLAB_Job</span>
<span class="c1">#SBATCH --time=0:20:0</span>
<span class="c1">#SBATCH --nodes=1</span>
<span class="c1">#SBATCH --tasks-per-node=6</span>
<span class="c1">#SBATCH --cpus-per-task=1</span>


<span class="c1"># Replace [budget code] below with your project code (e.g. t01)</span>
<span class="c1">#SBATCH --account=[budget code]</span>
<span class="c1"># Replace [partition name] below with your partition name (e.g. standard,gpu)</span>
<span class="c1">#SBATCH --partition=[partition name]</span>
<span class="c1"># Replace [qos name] below with your qos name (e.g. standard,long,gpu)</span>
<span class="c1">#SBATCH --qos=[qos name]</span>

module<span class="w"> </span>load<span class="w"> </span>matlab

matlab_wrapper<span class="w"> </span>-nodisplay<span class="w"> </span>&lt;<span class="w"> </span>/mnt/lustre/indy2lfs/sw/cse-matlab/examples/testp.m<span class="w"> </span>&gt;<span class="w"> </span>testp.log
</code></pre></div>
<p>Note, for MATLAB versions R2019 and later, the
<span class="title-ref">matlab_wrapper_2019</span> script may be
required (see 2019 section below).</p>
<p>This would run the <em>testp.m</em> script, without a display, and exit when
<em>testp.m</em> has finished. 6 CPUs are selected, which correspond to 6
cores, and the following limits would be set initially :</p>
<div class="highlight"><pre><span></span><code>ncores = 6
memory = 42GB

Maximum number of computational threads (maxNumCompThreads)          = 6
Preferred number of workers in a parallel pool (PreferredNumWorkers) = 6
Number of workers to start on your local machine (NumWorkers)        = 6
Number of computational threads to use on each worker (NumThreads)   = 1
</code></pre></div>
<p>The <em>testp.m</em> program sets <em>NumWorkers</em> to 3 and <em>NumThreads</em> to 2 :</p>
<div class="highlight"><pre><span></span><code><span class="n">cirrus_cluster</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">parcluster</span><span class="p">(</span><span class="s">&#39;local&#39;</span><span class="p">);</span>
<span class="n">ncores</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">cirrus_cluster</span><span class="p">.</span><span class="n">NumWorkers</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">cirrus_cluster</span><span class="p">.</span><span class="n">NumThreads</span><span class="p">;</span>
<span class="n">cirrus_cluster</span><span class="p">.</span><span class="n">NumWorkers</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
<span class="n">cirrus_cluster</span><span class="p">.</span><span class="n">NumThreads</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<span class="nb">fprintf</span><span class="p">(</span><span class="s">&quot;NumWorkers = %d NumThreads = %d ncores = %d\n&quot;</span><span class="p">,</span><span class="n">cirrus_cluster</span><span class="p">.</span><span class="n">NumWorkers</span><span class="p">,</span><span class="n">cirrus_cluster</span><span class="p">.</span><span class="n">NumThreads</span><span class="p">,</span><span class="n">ncores</span><span class="p">);</span>
<span class="k">if</span><span class="w"> </span><span class="n">cirrus_cluster</span><span class="p">.</span><span class="n">NumWorkers</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">cirrus_cluster</span><span class="p">.</span><span class="n">NumThreads</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">ncores</span>
<span class="w">    </span><span class="nb">disp</span><span class="p">(</span><span class="s">&quot;NumWorkers * NumThreads &gt; ncores&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="nb">disp</span><span class="p">(</span><span class="s">&quot;Exiting&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="nb">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="k">end</span>
<span class="n">saveProfile</span><span class="p">(</span><span class="n">cirrus_cluster</span><span class="p">);</span>
<span class="n">clear</span><span class="w"> </span><span class="s">cirrus_cluster</span><span class="p">;</span>


<span class="n">n</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
<span class="n">A</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">3000</span><span class="p">;</span>

<span class="n">a</span><span class="p">=</span><span class="nb">zeros</span><span class="p">(</span><span class="n">A</span><span class="p">,</span><span class="n">A</span><span class="p">,</span><span class="n">n</span><span class="p">);</span>
<span class="n">b</span><span class="p">=</span><span class="mi">1</span><span class="p">:</span><span class="n">n</span><span class="p">;</span>

<span class="n">parpool</span><span class="p">;</span>

<span class="n">tic</span>
<span class="s">parfor</span><span class="w"> </span><span class="s">i</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">1</span><span class="p">:</span><span class="n">n</span>
<span class="w">    </span><span class="n">a</span><span class="p">(:,:,</span><span class="nb">i</span><span class="p">)</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">rand</span><span class="p">(</span><span class="n">A</span><span class="p">);</span>
<span class="k">end</span>
<span class="nb">toc</span>
<span class="nb">tic</span>
<span class="k">parfor</span><span class="w"> </span><span class="nb">i</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">1</span><span class="p">:</span><span class="n">n</span>
<span class="w">    </span><span class="n">b</span><span class="p">(</span><span class="nb">i</span><span class="p">)</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="nb">eig</span><span class="p">(</span><span class="n">a</span><span class="p">(:,:,</span><span class="nb">i</span><span class="p">))));</span>
<span class="k">end</span>
<span class="nb">toc</span>
</code></pre></div>
<p>Note that <em>PreferredNumWorkers</em>, <em>NumWorkers</em> and <em>NumThreads</em> persist
between MATLAB sessions but will be updated correctly if you use the
wrapper each time.</p>
<p><em>NumWorkers</em> and <em>NumThreads</em> can be changed (using <em>parcluster</em> and
<em>saveProfile</em>) but <em>NumWorkers</em> * <em>NumThreads</em> should be less than or
equal to the number of cores (<em>ncores</em> above). If you wish a worker to
run a threaded routine in serial, you must set <em>NumThreads</em> to 1 (the
default).</p>
<p>If you specify exclusive node access, then all the cores and memory will
be available. On the login nodes, a single core is used and memory is
not limited.</p>
<h2 id="matlab-2019-versions">MATLAB 2019 versions</h2>
<p>There has been a change of configuration options for MATLAB from version
R2019 and onwards that means the <span class="title-ref">-r</span> flag
has been replaced with the <span class="title-ref">-batch</span> flag.
To accommodate that a new job wrapper script is required to run
applications. For these versions of MATLAB, if you need to use the
<span class="title-ref">-r</span> or
<span class="title-ref">-batch</span> flag replace this line in your
Slurm script, i.e.:</p>
<div class="highlight"><pre><span></span><code><span class="n">matlab_wrapper</span><span class="w"> </span><span class="o">-</span><span class="n">nodisplay</span><span class="w"> </span><span class="o">-</span><span class="n">nodesktop</span><span class="w"> </span><span class="o">-</span><span class="n">batch</span><span class="w"> </span><span class="s">&quot;main_simulated_data_FINAL_clean(&quot;</span>$<span class="n">ind</span><span class="s">&quot;,&quot;</span>$<span class="nb">gamma</span><span class="s">&quot;,&quot;</span>$<span class="n">rw</span><span class="s">&quot;,&#39;&quot;</span>$<span class="n">SLURM_JOB_ID</span>&quot;<span class="s">&#39;</span><span class="err">)</span>
</code></pre></div>
<p>with:</p>
<div class="highlight"><pre><span></span><code><span class="n">matlab_wrapper_2019</span><span class="w"> </span><span class="o">-</span><span class="n">nodisplay</span><span class="w"> </span><span class="o">-</span><span class="n">nodesktop</span><span class="w"> </span><span class="o">-</span><span class="n">batch</span><span class="w"> </span><span class="s">&quot;main_simulated_data_FINAL_clean(&quot;</span>$<span class="n">ind</span><span class="s">&quot;,&quot;</span>$<span class="nb">gamma</span><span class="s">&quot;,&quot;</span>$<span class="n">rw</span><span class="s">&quot;,&#39;&quot;</span>$<span class="n">SLURM_JOB_ID</span>&quot;<span class="s">&#39;</span><span class="err">)</span>
</code></pre></div>
<p>and this should allow scripts to run normally.</p>
<h2 id="running-parallel-matlab-jobs-using-mdcs">Running parallel MATLAB jobs using MDCS</h2>
<p>It is possible to use MATLAB on the login node to set up an MDCS Slurm
cluster profile and then launch jobs using that profile. However, this
does not give per-job control of the number of cores and walltime; these
are set once in the profile.</p>
<p>This MDCS profile can be used in MATLAB on the login node - the MDCS
computations are done in Slurm jobs launched using the profile.</p>
<h3 id="configuration">Configuration</h3>
<p>Start MATLAB on the login node. Configure MATLAB to run parallel jobs on
your cluster by calling <em>configCluster</em>. For each cluster,
<em>configCluster</em> only needs to be called once per version of MATLAB :</p>
<div class="highlight"><pre><span></span><code><span class="n">configCluster</span>
</code></pre></div>
<p>Jobs will now default to the cluster rather than submit to the local
machine (the login node in this case).</p>
<h3 id="configuring-jobs">Configuring jobs</h3>
<p>Prior to submitting the job, you can specify various parameters to pass
to our jobs, such as walltime, e-mail, etc. Other than <em>ProjectCode</em> and
<em>WallTime</em>, none of these are required to be set.</p>
<p>NOTE: Any parameters specified using this workflow will be persistent
between MATLAB sessions :</p>
<div class="highlight"><pre><span></span><code><span class="c">% Get a handle to the cluster.</span>
<span class="n">c</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">parcluster</span><span class="p">(</span><span class="s">&#39;cirrus&#39;</span><span class="p">);</span>

<span class="c">% Assign the project code for the job.  **[REQUIRED]**</span>
<span class="n">c</span><span class="p">.</span><span class="n">AdditionalProperties</span><span class="p">.</span><span class="n">ProjectCode</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&#39;project-code&#39;</span><span class="p">;</span>

<span class="c">% Specify the walltime (e.g. 5 hours).  **[REQUIRED]**</span>
<span class="n">c</span><span class="p">.</span><span class="n">AdditionalProperties</span><span class="p">.</span><span class="n">WallTime</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&#39;05:00:00&#39;</span><span class="p">;</span>

<span class="c">% Specify e-mail address to receive notifications about your job.</span>
<span class="n">c</span><span class="p">.</span><span class="n">AdditionalProperties</span><span class="p">.</span><span class="n">EmailAddress</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&#39;your_name@your_address&#39;</span><span class="p">;</span>

<span class="c">% Request a specific reservation to run your job.  It is better to</span>
<span class="c">% use the queues rather than a reservation.</span>
<span class="n">c</span><span class="p">.</span><span class="n">AdditionalProperties</span><span class="p">.</span><span class="n">Reservation</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&#39;your-reservation&#39;</span><span class="p">;</span>

<span class="c">% Set the job placement (e.g., pack, excl, scatter:excl).</span>
<span class="c">% Usually the default of free is what you want.</span>
<span class="n">c</span><span class="p">.</span><span class="n">AdditionalProperties</span><span class="p">.</span><span class="n">JobPlacement</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&#39;pack&#39;</span><span class="p">;</span>

<span class="c">% Request to run in a particular queue.  Usually the default (no</span>
<span class="c">% specific queue requested) will route the job to the correct queue.</span>
<span class="n">c</span><span class="p">.</span><span class="n">AdditionalProperties</span><span class="p">.</span><span class="n">QueueName</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&#39;queue-name&#39;</span><span class="p">;</span>

<span class="c">% If you are using GPUs, request up to 4 GPUs per node (this will</span>
<span class="c">% override a requested queue name and will use the &#39;gpu&#39; queue).</span>
<span class="n">c</span><span class="p">.</span><span class="n">AdditionalProperties</span><span class="p">.</span><span class="n">GpusPerNode</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span>
</code></pre></div>
<p>Save changes after modifying <em>AdditionalProperties</em> fields :</p>
<div class="highlight"><pre><span></span><code><span class="n">c</span><span class="p">.</span><span class="n">saveProfile</span>
</code></pre></div>
<p>To see the values of the current configuration options, call the
specific <em>AdditionalProperties</em> name :</p>
<div class="highlight"><pre><span></span><code><span class="n">c</span><span class="p">.</span><span class="n">AdditionalProperties</span>
</code></pre></div>
<p>To clear a value, assign the property an empty value (<em>''</em>, <em>[]</em>, or
<em>false</em>) :</p>
<div class="highlight"><pre><span></span><code><span class="c">% Turn off email notifications.</span>
<span class="n">c</span><span class="p">.</span><span class="n">AdditionalProperties</span><span class="p">.</span><span class="n">EmailAddress</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&#39;&#39;</span><span class="p">;</span>
</code></pre></div>
<h3 id="interactive-jobs">Interactive jobs</h3>
<p>To run an interactive pool job on the cluster, use <em>parpool</em> as before.
<em>configCluster</em> sets <em>NumWorkers</em> to 32 in the cluster to match the
number of MDCS workers available in our TAH licence. If you have your
own MDCS licence, you can change this by setting <em>c.NumWorkers</em> and
saving the profile. :</p>
<div class="highlight"><pre><span></span><code><span class="c">% Open a pool of 32 workers on the cluster.</span>
<span class="n">p</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">parpool</span><span class="p">(</span><span class="s">&#39;cirrus&#39;</span><span class="p">,</span><span class="mi">32</span><span class="p">);</span>
</code></pre></div>
<p>Rather than running locally on one compute node machine, this pool can
run across multiple nodes on the cluster :</p>
<div class="highlight"><pre><span></span><code><span class="c">% Run a parfor over 1000 iterations.</span>
<span class="k">parfor</span><span class="w"> </span><span class="n">idx</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">1</span><span class="p">:</span><span class="mi">1000</span>
<span class="w">  </span><span class="n">a</span><span class="p">(</span><span class="n">idx</span><span class="p">)</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">...</span>
<span class="k">end</span>
</code></pre></div>
<p>Once you have finished using the pool, delete it :</p>
<div class="highlight"><pre><span></span><code><span class="c">% Delete the pool</span>
<span class="n">p</span><span class="p">.</span><span class="n">delete</span>
</code></pre></div>
<h3 id="serial-jobs">Serial jobs</h3>
<p>Rather than running interactively, use the <em>batch</em> command to submit
asynchronous jobs to the cluster. This is generally more useful on
Cirrus, which usually has long queues. The <em>batch</em> command will return a
job object which is used to access the output of the submitted job. See
the MATLAB documentation for more help on <em>batch</em> :</p>
<div class="highlight"><pre><span></span><code><span class="c">% Get a handle to the cluster.</span>
<span class="n">c</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">parcluster</span><span class="p">(</span><span class="s">&#39;cirrus&#39;</span><span class="p">);</span>

<span class="c">% Submit job to query where MATLAB is running on the cluster.</span>
<span class="nb">j</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">c</span><span class="p">.</span><span class="n">batch</span><span class="p">(@</span><span class="nb">pwd</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="p">{});</span>

<span class="c">% Query job for state.</span>
<span class="nb">j</span><span class="p">.</span><span class="n">State</span>

<span class="c">% If state is finished, fetch results.</span>
<span class="nb">j</span><span class="p">.</span><span class="n">fetchOutputs</span><span class="p">{:}</span>

<span class="c">% Delete the job after results are no longer needed.</span>
<span class="nb">j</span><span class="p">.</span><span class="n">delete</span>
</code></pre></div>
<p>To retrieve a list of currently running or completed jobs, call
<em>parcluster</em> to retrieve the cluster object. The cluster object stores
an array of jobs that were run, are running, or are queued to run. This
allows you to fetch the results of completed jobs. Retrieve and view the
list of jobs as shown below :</p>
<div class="highlight"><pre><span></span><code><span class="n">c</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">parcluster</span><span class="p">(</span><span class="s">&#39;cirrus&#39;</span><span class="p">);</span>
<span class="n">jobs</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">c</span><span class="p">.</span><span class="n">Jobs</span>
</code></pre></div>
<p>Once you have identified the job you want, you can retrieve the results
as you have done previously.</p>
<p><em>fetchOutputs</em> is used to retrieve function output arguments; if using
batch with a script, use <em>load</em> instead. Data that has been written to
files on the cluster needs be retrieved directly from the file system.</p>
<p>To view results of a previously completed job :</p>
<div class="highlight"><pre><span></span><code><span class="c">% Get a handle on job with ID 2.</span>
<span class="n">j2</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">c</span><span class="p">.</span><span class="n">Jobs</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
</code></pre></div>
<p>NOTE: You can view a list of your jobs, as well as their IDs, using the
above <em>c.Jobs</em> command :</p>
<div class="highlight"><pre><span></span><code><span class="c">% Fetch results for job with ID 2.</span>
<span class="n">j2</span><span class="p">.</span><span class="n">fetchOutputs</span><span class="p">{:}</span>

<span class="c">% If the job produces an error, view the error log file.</span>
<span class="n">c</span><span class="p">.</span><span class="n">getDebugLog</span><span class="p">(</span><span class="nb">j</span><span class="p">.</span><span class="n">Tasks</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
</code></pre></div>
<p>NOTE: When submitting independent jobs, with multiple tasks, you will
have to specify the task number.</p>
<h3 id="parallel-jobs">Parallel jobs</h3>
<p>Users can also submit parallel workflows with batch. You can use the
following example (<em>parallel_example.m</em>) for a parallel job :</p>
<div class="highlight"><pre><span></span><code><span class="k">function</span><span class="w"> </span>t<span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nf">parallel_example</span><span class="p">(</span>iter<span class="p">)</span>

<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="nb">nargin</span><span class="o">==</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">iter</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">16</span><span class="p">;</span><span class="w"> </span><span class="k">end</span>

<span class="w">  </span><span class="nb">disp</span><span class="p">(</span><span class="s">&#39;Start sim&#39;</span><span class="p">)</span>

<span class="w">  </span><span class="n">t0</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">tic</span><span class="p">;</span>
<span class="w">  </span><span class="k">parfor</span><span class="w"> </span><span class="n">idx</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">1</span><span class="p">:</span><span class="n">iter</span>
<span class="w">    </span><span class="n">A</span><span class="p">(</span><span class="n">idx</span><span class="p">)</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">idx</span><span class="p">;</span>
<span class="w">    </span><span class="nb">pause</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
<span class="w">  </span><span class="k">end</span>
<span class="w">  </span><span class="n">t</span><span class="w"> </span><span class="p">=</span><span class="nb">toc</span><span class="p">(</span><span class="n">t0</span><span class="p">);</span>

<span class="w">  </span><span class="nb">disp</span><span class="p">(</span><span class="s">&#39;Sim completed.&#39;</span><span class="p">)</span>
</code></pre></div>
<p>Use the <em>batch</em> command again, but since you are running a parallel job,
you also specify a MATLAB Pool :</p>
<div class="highlight"><pre><span></span><code><span class="c">% Get a handle to the cluster.</span>
<span class="n">c</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">parcluster</span><span class="p">(</span><span class="s">&#39;cirrus&#39;</span><span class="p">);</span>

<span class="c">% Submit a batch pool job using 4 workers for 16 simulations.</span>
<span class="nb">j</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">c</span><span class="p">.</span><span class="n">batch</span><span class="p">(@</span><span class="n">parallel_example</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="p">{},</span><span class="w"> </span><span class="s">&#39;Pool&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">);</span>

<span class="c">% View current job status.</span>
<span class="nb">j</span><span class="p">.</span><span class="n">State</span>

<span class="c">% Fetch the results after a finished state is retrieved.</span>
<span class="nb">j</span><span class="p">.</span><span class="n">fetchOutputs</span><span class="p">{:}</span>

<span class="nb">ans</span><span class="w"> </span><span class="p">=</span>

<span class="mf">8.8872</span>
</code></pre></div>
<p>The job ran in 8.89 seconds using 4 workers. Note that these jobs will
always request N+1 CPU cores, since one worker is required to manage the
batch job and pool of workers. For example, a job that needs eight
workers will consume nine CPU cores. With a MDCS licence for 32 workers,
you will be able to have a pool of 31 workers.</p>
<p>Run the same simulation but increase the Pool size. This time, to
retrieve the results later, keep track of the job ID.</p>
<p>NOTE: For some applications, there will be a diminishing return when
allocating too many workers, as the overhead may exceed computation
time. :</p>
<div class="highlight"><pre><span></span><code><span class="c">% Get a handle to the cluster.</span>
<span class="n">c</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">parcluster</span><span class="p">(</span><span class="s">&#39;cirrus&#39;</span><span class="p">);</span>

<span class="c">% Submit a batch pool job using 8 workers for 16 simulations.</span>
<span class="nb">j</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">c</span><span class="p">.</span><span class="n">batch</span><span class="p">(@</span><span class="n">parallel_example</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="p">{},</span><span class="w"> </span><span class="s">&#39;Pool&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">8</span><span class="p">);</span>

<span class="c">% Get the job ID</span>
<span class="n">id</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">j</span><span class="p">.</span><span class="n">ID</span>

<span class="n">Id</span><span class="w"> </span><span class="p">=</span>

<span class="n">4</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c">% Clear workspace, as though you have quit MATLAB.</span>
<span class="nb">clear</span><span class="w"> </span><span class="nb">j</span>
</code></pre></div>
<p>Once you have a handle to the cluster, call the <em>findJob</em> method to
search for the job with the specified job ID :</p>
<div class="highlight"><pre><span></span><code><span class="c">% Get a handle to the cluster.</span>
<span class="n">c</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">parcluster</span><span class="p">(</span><span class="s">&#39;cirrus&#39;</span><span class="p">);</span>

<span class="c">% Find the old job</span>
<span class="nb">j</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">c</span><span class="p">.</span><span class="n">findJob</span><span class="p">(</span><span class="s">&#39;ID&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">);</span>

<span class="c">% Retrieve the state of the job.</span>
<span class="nb">j</span><span class="p">.</span><span class="n">State</span>

<span class="nb">ans</span>

<span class="n">finished</span>

<span class="s">%</span><span class="w"> </span><span class="s">Fetch</span><span class="w"> </span><span class="s">the</span><span class="w"> </span><span class="s">results.</span>
<span class="nb">j</span><span class="p">.</span><span class="n">fetchOutputs</span><span class="p">{:};</span>

<span class="nb">ans</span><span class="w"> </span><span class="p">=</span>

<span class="mf">4.7270</span>

<span class="c">% If necessary, retrieve an output/error log file.</span>
<span class="n">c</span><span class="p">.</span><span class="n">getDebugLog</span><span class="p">(</span><span class="nb">j</span><span class="p">)</span>
</code></pre></div>
<p>The job now runs 4.73 seconds using 8 workers. Run code with different
number of workers to determine the ideal number to use.</p>
<p>Alternatively, to retrieve job results via a graphical user interface,
use the Job Monitor (Parallel &gt; Monitor Jobs).</p>
<p><img src="../images/MATLAB_image1.png"
 alt="image1" /></p>
<h3 id="debugging">Debugging</h3>
<p>If a serial job produces an error, you can call the <em>getDebugLog</em> method
to view the error log file :</p>
<div class="highlight"><pre><span></span><code><span class="nb">j</span><span class="p">.</span><span class="n">Parent</span><span class="p">.</span><span class="n">getDebugLog</span><span class="p">(</span><span class="nb">j</span><span class="p">.</span><span class="n">Tasks</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
</code></pre></div>
<p>When submitting independent jobs, with multiple tasks, you will have to
specify the task number. For Pool jobs, do not dereference into the job
object :</p>
<div class="highlight"><pre><span></span><code><span class="nb">j</span><span class="p">.</span><span class="n">Parent</span><span class="p">.</span><span class="n">getDebugLog</span><span class="p">(</span><span class="nb">j</span><span class="p">)</span>
</code></pre></div>
<p>The scheduler ID can be derived by calling <em>schedID</em> :</p>
<div class="highlight"><pre><span></span><code><span class="n">schedID</span><span class="p">(</span><span class="nb">j</span><span class="p">)</span>

<span class="nb">ans</span>

<span class="n">25539</span>
</code></pre></div>
<h3 id="to-learn-more">To learn more</h3>
<p>To learn more about the MATLAB Parallel Computing Toolbox, check out
these resources:</p>
<ul>
<li><a href="http://www.mathworks.com/products/parallel-computing/code-examples.html">Parallel Computing Coding
  Examples</a></li>
<li><a href="http://www.mathworks.com/help/distcomp/index.html">Parallel Computing
  Documentation</a></li>
<li><a href="http://www.mathworks.com/products/parallel-computing/index.html">Parallel Computing
  Overview</a></li>
<li><a href="http://www.mathworks.com/products/parallel-computing/tutorials.html">Parallel Computing
  Tutorials</a></li>
<li><a href="http://www.mathworks.com/products/parallel-computing/videos.html">Parallel Computing
  Videos</a></li>
<li><a href="http://www.mathworks.com/products/parallel-computing/webinars.html">Parallel Computing
  Webinars</a></li>
</ul>
<h2 id="gpus">GPUs</h2>
<p>Calculations using GPUs can be done using the <code>GPU nodes
&lt;../user-guide/gpu&gt;</code>. This can be done using MATLAB within a Slurm job
script, similar to <code>using the local cluster &lt;local&gt;</code>, or can be done
using the <code>MDCS profile &lt;MDCS&gt;</code>. The GPUs are shared unless you request
exclusive access to the node (4 GPUs), so you may find that you share a
GPU with another user.</p>









  




                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/EPCCed" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["tabs"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.bd41221c.min.js"></script>
      
    
  </body>
</html>