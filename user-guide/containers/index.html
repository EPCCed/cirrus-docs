
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../development/">
      
      
        <link rel="next" href="../python/">
      
      
        
      
      
      <link rel="icon" href="../../favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0">
    
    
      
        <title>Using Containers - Cirrus User Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.618322db.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/cirrus.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-3T9RVR5FTP"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-3T9RVR5FTP",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-3T9RVR5FTP",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#using-containers" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Cirrus User Documentation" class="md-header__button md-logo" aria-label="Cirrus User Documentation" data-md-component="logo">
      
  <img src="../../images/cirrus_logo_white-Transparent-Background.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Cirrus User Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Using Containers
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/EPCCed/cirrus-docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    EPCCed/cirrus-docs
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Cirrus User Documentation" class="md-nav__button md-logo" aria-label="Cirrus User Documentation" data-md-component="logo">
      
  <img src="../../images/cirrus_logo_white-Transparent-Background.png" alt="logo">

    </a>
    Cirrus User Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/EPCCed/cirrus-docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    EPCCed/cirrus-docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    New Cirrus EX4000 migration
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    New Cirrus EX4000 migration
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../migration-2025/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../migration-2025/not-migrating/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Projects not continuing on Cirrus EX4000
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../migration-2025/account-migration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Account/Project Migration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../migration-2025/data-migration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Data Migration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../migration-2025/cirrus-differences/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Differences from old Cirrus
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    User Guide
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    User Guide
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../introduction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introduction
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../hardware/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Hardware
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../connecting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Connecting to Cirrus
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../data/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Data Management and Transfer
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../resource_management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    File and Resource Management
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sw-environment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Software environment
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../batch/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Scheduler and Running Jobs
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../development/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Application Development Environment
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Using Containers
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Using Containers
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#apptainer" class="md-nav__link">
    <span class="md-ellipsis">
      
        Apptainer
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Apptainer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#useful-links" class="md-nav__link">
    <span class="md-ellipsis">
      
        Useful Links
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#about-apptainer-container-images" class="md-nav__link">
    <span class="md-ellipsis">
      
        About Apptainer container images
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-container-images-on-cirrus" class="md-nav__link">
    <span class="md-ellipsis">
      
        Using container images on Cirrus
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Using container images on Cirrus">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#getting-existing-container-images-onto-cirrus" class="md-nav__link">
    <span class="md-ellipsis">
      
        Getting existing container images onto Cirrus
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#interactive-use-on-the-login-nodes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Interactive use on the login nodes
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#interactive-use-on-the-compute-nodes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Interactive use on the compute nodes
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#serial-processes-within-a-non-interactive-batch-script" class="md-nav__link">
    <span class="md-ellipsis">
      
        Serial processes within a non-interactive batch script
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parallel-processes-within-a-non-interactive-batch-script" class="md-nav__link">
    <span class="md-ellipsis">
      
        Parallel processes within a non-interactive batch script
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-your-own-apptainer-container-images" class="md-nav__link">
    <span class="md-ellipsis">
      
        Creating your own Apptainer container images
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Creating your own Apptainer container images">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#building-container-images-using-podman" class="md-nav__link">
    <span class="md-ellipsis">
      
        Building container images using Podman
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-apptainer-with-mpi-on-cirrus" class="md-nav__link">
    <span class="md-ellipsis">
      
        Using Apptainer with MPI on Cirrus
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Using Apptainer with MPI on Cirrus">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#building-an-image-with-mpi-from-scratch" class="md-nav__link">
    <span class="md-ellipsis">
      
        Building an image with MPI from scratch
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#running-parallel-mpi-jobs-using-apptainer-containers" class="md-nav__link">
    <span class="md-ellipsis">
      
        Running parallel MPI jobs using Apptainer containers
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../python/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Using Python
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Software Applications
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Software Applications
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software-packages/castep/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CASTEP
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software-packages/cp2k/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CP2K
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software-packages/gromacs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Gromacs
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software-packages/lammps/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    LAMMPS
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software-packages/openfoam/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    OpenFOAM
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software-packages/qe/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Quantum Espresso (QE)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software-packages/vasp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    VASP
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Software Libraries
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Software Libraries
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software-libraries/libsci/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Cray LibSci: BLAS, LAPACK, ScaLAPACK
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software-libraries/fftw/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    FFTW
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software-libraries/hdf5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    HDF5
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software-libraries/netcdf/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    NetCDF
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Software Tools
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Software Tools
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software-tools/spack/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Spack
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software-tools/likwid/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Likwid
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#apptainer" class="md-nav__link">
    <span class="md-ellipsis">
      
        Apptainer
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Apptainer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#useful-links" class="md-nav__link">
    <span class="md-ellipsis">
      
        Useful Links
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#about-apptainer-container-images" class="md-nav__link">
    <span class="md-ellipsis">
      
        About Apptainer container images
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-container-images-on-cirrus" class="md-nav__link">
    <span class="md-ellipsis">
      
        Using container images on Cirrus
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Using container images on Cirrus">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#getting-existing-container-images-onto-cirrus" class="md-nav__link">
    <span class="md-ellipsis">
      
        Getting existing container images onto Cirrus
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#interactive-use-on-the-login-nodes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Interactive use on the login nodes
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#interactive-use-on-the-compute-nodes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Interactive use on the compute nodes
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#serial-processes-within-a-non-interactive-batch-script" class="md-nav__link">
    <span class="md-ellipsis">
      
        Serial processes within a non-interactive batch script
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parallel-processes-within-a-non-interactive-batch-script" class="md-nav__link">
    <span class="md-ellipsis">
      
        Parallel processes within a non-interactive batch script
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-your-own-apptainer-container-images" class="md-nav__link">
    <span class="md-ellipsis">
      
        Creating your own Apptainer container images
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Creating your own Apptainer container images">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#building-container-images-using-podman" class="md-nav__link">
    <span class="md-ellipsis">
      
        Building container images using Podman
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-apptainer-with-mpi-on-cirrus" class="md-nav__link">
    <span class="md-ellipsis">
      
        Using Apptainer with MPI on Cirrus
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Using Apptainer with MPI on Cirrus">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#building-an-image-with-mpi-from-scratch" class="md-nav__link">
    <span class="md-ellipsis">
      
        Building an image with MPI from scratch
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#running-parallel-mpi-jobs-using-apptainer-containers" class="md-nav__link">
    <span class="md-ellipsis">
      
        Running parallel MPI jobs using Apptainer containers
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="using-containers">Using Containers</h1>
<p>This page was originally based on the documentation at the <a href="http://docs.hpc.shef.ac.uk/en/latest/sharc/software/apps/singularity.html">University
of Sheffield HPC
service</a>.</p>
<p>Designed around the notion of mobility of compute and reproducible
science, containers enable users to have full control of their
operating system environment. This means that a non-privileged user can
"swap out" the Linux operating system and environment on the host for a
Linux OS and environment that they control. So if the host system is
running CentOS Linux but your application runs in Ubuntu Linux with a
particular software stack, you can create an Ubuntu image, install your
software into that image, copy the image to another host (e.g. Cirrus),
and run your application on that host in its native Ubuntu environment.</p>
<p>Containers also allow you to leverage the resources of whatever host
you are on. This includes high-speed interconnects (e.g. Infiniband),
file systems (e.g. Lustre) and potentially other resources.</p>
<h2 id="apptainer">Apptainer</h2>
<p>The container software supported on Cirrus is Apptainer.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Apptainer only supports Linux containers. You cannot create images
that use Windows or macOS (this is a restriction of the containerisation
model rather than of Apptainer).</p>
</div>
<h3 id="useful-links">Useful Links</h3>
<ul>
<li><a href="https://apptainer.org/">Apptainer website</a></li>
<li><a href="https://apptainer.org/docs/user/latest/">Apptainer documentation</a></li>
</ul>
<h2 id="about-apptainer-container-images">About Apptainer container images</h2>
<p>Similar to Docker or Podman, an Apptainer container image (or, more commonly, <em>image</em>)
is a self-contained software stack. As Apptainer does not require a
root-level daemon to run its images (as is required by Docker) it is
suitable for use on a multi-user HPC system such as Cirrus. Within a 
running container created from the container image, you have exactly
the same permissions as you do in a standard login session on the system.</p>
<p>In principle, this means that a container image created on your local machine
with all your research software installed for local development will
also run on Cirrus.</p>
<p>Pre-built container images (such as those on <a href="http://hub.docker.com">DockerHub</a> or
<a href="hhttps://quay.io/">Quay.io</a> can simply be downloaded
and used on Cirrus (or anywhere else Singularity is installed).</p>
<p>Creating and modifying container images requires root permission and so must be
done on a system where you have such access (in practice, this is
usually your laptop/workstation using Docker or Podman).</p>
<h2 id="using-container-images-on-cirrus">Using container images on Cirrus</h2>
<p>Container images can be used on Cirrus in a number of ways.</p>
<ol>
<li>Interactively on the login nodes</li>
<li>Interactively on compute nodes</li>
<li>As serial processes within a non-interactive batch script</li>
<li>As parallel processes within a non-interactive batch script</li>
</ol>
<p>We provide information on each of these scenarios. First, we describe
briefly how to get existing container images onto Cirrus and converted
to the Apptainer format so that you can use them.</p>
<h3 id="getting-existing-container-images-onto-cirrus">Getting existing container images onto Cirrus</h3>
<p>Container images are most usually downloaded onto Cirrus from a 
container image repository (such as Dockerhub or Quay.io) so we 
discuss that mechanism in detail. If you already have your 
container images in Apptainer format as an <em>image file</em> then you 
can copy these to Cirrus in the same way as any other file.</p>
<p>Singularity images are simply files, so if you already have an image
file, you can use <code>scp</code> to copy the file to Cirrus as you would with any
other file.</p>
<p>To fetch a container image from a container image repository and
convert to an Apptainer container image file on the fly, you can 
use a command such as:</p>
<div class="highlight"><pre><span></span><code>apptainer build hello_world.sif docker://hub.docker.com/hello-world
</code></pre></div>
<p>This will download the "hello-world" container image from DockerHub
and save it as an Apptainer image file in the file <code>hello-world.sif</code>.</p>
<h3 id="interactive-use-on-the-login-nodes">Interactive use on the login nodes</h3>
<p>To run a container created from a container image file on the login node
you would use (note mention of Docker as this was downloaded from Docker Hub,
however we are running the container using Apptainer):</p>
<div class="highlight"><pre><span></span><code><span class="o">[</span>user@login01<span class="w"> </span>~<span class="o">]</span>$<span class="w"> </span>apptainer<span class="w"> </span>run<span class="w"> </span>hello-world.sif<span class="w"> </span>
Hello<span class="w"> </span>from<span class="w"> </span>Docker!
This<span class="w"> </span>message<span class="w"> </span>shows<span class="w"> </span>that<span class="w"> </span>your<span class="w"> </span>installation<span class="w"> </span>appears<span class="w"> </span>to<span class="w"> </span>be<span class="w"> </span>working<span class="w"> </span>correctly.

To<span class="w"> </span>generate<span class="w"> </span>this<span class="w"> </span>message,<span class="w"> </span>Docker<span class="w"> </span>took<span class="w"> </span>the<span class="w"> </span>following<span class="w"> </span>steps:
<span class="w"> </span><span class="m">1</span>.<span class="w"> </span>The<span class="w"> </span>Docker<span class="w"> </span>client<span class="w"> </span>contacted<span class="w"> </span>the<span class="w"> </span>Docker<span class="w"> </span>daemon.
<span class="w"> </span><span class="m">2</span>.<span class="w"> </span>The<span class="w"> </span>Docker<span class="w"> </span>daemon<span class="w"> </span>pulled<span class="w"> </span>the<span class="w"> </span><span class="s2">&quot;hello-world&quot;</span><span class="w"> </span>image<span class="w"> </span>from<span class="w"> </span>the<span class="w"> </span>Docker<span class="w"> </span>Hub.
<span class="w">    </span><span class="o">(</span>amd64<span class="o">)</span>
<span class="w"> </span><span class="m">3</span>.<span class="w"> </span>The<span class="w"> </span>Docker<span class="w"> </span>daemon<span class="w"> </span>created<span class="w"> </span>a<span class="w"> </span>new<span class="w"> </span>container<span class="w"> </span>from<span class="w"> </span>that<span class="w"> </span>image<span class="w"> </span>which<span class="w"> </span>runs<span class="w"> </span>the
<span class="w">    </span>executable<span class="w"> </span>that<span class="w"> </span>produces<span class="w"> </span>the<span class="w"> </span>output<span class="w"> </span>you<span class="w"> </span>are<span class="w"> </span>currently<span class="w"> </span>reading.
<span class="w"> </span><span class="m">4</span>.<span class="w"> </span>The<span class="w"> </span>Docker<span class="w"> </span>daemon<span class="w"> </span>streamed<span class="w"> </span>that<span class="w"> </span>output<span class="w"> </span>to<span class="w"> </span>the<span class="w"> </span>Docker<span class="w"> </span>client,<span class="w"> </span>which<span class="w"> </span>sent<span class="w"> </span>it
<span class="w">    </span>to<span class="w"> </span>your<span class="w"> </span>terminal.

To<span class="w"> </span>try<span class="w"> </span>something<span class="w"> </span>more<span class="w"> </span>ambitious,<span class="w"> </span>you<span class="w"> </span>can<span class="w"> </span>run<span class="w"> </span>an<span class="w"> </span>Ubuntu<span class="w"> </span>container<span class="w"> </span>with:
<span class="w"> </span>$<span class="w"> </span>docker<span class="w"> </span>run<span class="w"> </span>-it<span class="w"> </span>ubuntu<span class="w"> </span>bash

Share<span class="w"> </span>images,<span class="w"> </span>automate<span class="w"> </span>workflows,<span class="w"> </span>and<span class="w"> </span>more<span class="w"> </span>with<span class="w"> </span>a<span class="w"> </span>free<span class="w"> </span>Docker<span class="w"> </span>ID:
<span class="w"> </span>https://hub.docker.com/

For<span class="w"> </span>more<span class="w"> </span>examples<span class="w"> </span>and<span class="w"> </span>ideas,<span class="w"> </span>visit:
<span class="w"> </span>https://docs.docker.com/get-started/
</code></pre></div>
<p>We can also run a container created from the container image file
and get an interactive shell prompt in the running container:</p>
<div class="highlight"><pre><span></span><code><span class="o">[</span>user@login01<span class="w"> </span>~<span class="o">]</span>$<span class="w"> </span>apptainer<span class="w"> </span>shell<span class="w"> </span>hello-world.sif
Apptainer&gt;<span class="w"> </span>ls<span class="w"> </span>/
bin<span class="w">  </span>boot<span class="w">  </span>dev<span class="w">  </span>environment<span class="w">  </span>etc<span class="w">  </span>home<span class="w">  </span>lib<span class="w">  </span>lib64<span class="w">  </span>lustre<span class="w">  </span>media<span class="w">  </span>mnt<span class="w">  </span>opt<span class="w">  </span>proc<span class="w">  </span>rawr.sh<span class="w">  </span>root<span class="w">  </span>run<span class="w">  </span>sbin<span class="w">  </span>singularity<span class="w">  </span>srv<span class="w">  </span>sys<span class="w">  </span>tmp<span class="w">  </span>usr<span class="w">  </span>var
Apptainer&gt;<span class="w"> </span><span class="nb">exit</span>
<span class="nb">exit</span>
<span class="o">[</span>user@login01<span class="w"> </span>~<span class="o">]</span>$<span class="w"> </span>
</code></pre></div>
<h3 id="interactive-use-on-the-compute-nodes">Interactive use on the compute nodes</h3>
<p>The process for using an image interactively on the compute nodes is
very similar to that for using them on the login nodes. The only
difference is that you first have to submit an interactive serial job to
get interactive access to the compute node.</p>
<p>First though, move to a suitable location on <code>/work</code> and copy the
<code>hello-world</code> container image file. This step is necessary as the compute
nodes do not have access to the <code>/home</code> file system. (This step assumes
you already downloaded the image as described above, if you have not done
this you can download directly to the <code>/work</code> file system by following the
instructions above.)</p>
<div class="highlight"><pre><span></span><code><span class="o">[</span>user@login01<span class="w"> </span>~<span class="o">]</span>$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span><span class="si">${</span><span class="nv">HOME</span><span class="p">/home/work</span><span class="si">}</span>
<span class="o">[</span>user@login01<span class="w"> </span>~<span class="o">]</span>$<span class="w"> </span>cp<span class="w"> </span>~/hello-world.sif<span class="w"> </span>.
</code></pre></div>
<p>Now reserve a full node to work on interactively by issuing an <code>salloc</code>
command, see below.</p>
<div class="highlight"><pre><span></span><code><span class="o">[</span>user@login01<span class="w"> </span>~<span class="o">]</span>$<span class="w"> </span>salloc<span class="w"> </span>--exclusive<span class="w"> </span>--nodes<span class="o">=</span><span class="m">1</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--tasks-per-node<span class="o">=</span><span class="m">288</span><span class="w"> </span>--cpus-per-task<span class="o">=</span><span class="m">1</span><span class="w"> </span>--time<span class="o">=</span><span class="m">00</span>:20:00<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--partition<span class="o">=</span>standard<span class="w"> </span>--qos<span class="o">=</span>standard<span class="w"> </span>--account<span class="o">=[</span>budget<span class="w"> </span>code<span class="o">]</span><span class="w"> </span>
salloc:<span class="w"> </span>Pending<span class="w"> </span>job<span class="w"> </span>allocation<span class="w"> </span><span class="m">14507</span>
salloc:<span class="w"> </span>job<span class="w"> </span><span class="m">14507</span><span class="w"> </span>queued<span class="w"> </span>and<span class="w"> </span>waiting<span class="w"> </span><span class="k">for</span><span class="w"> </span>resources
salloc:<span class="w"> </span>job<span class="w"> </span><span class="m">14507</span><span class="w"> </span>has<span class="w"> </span>been<span class="w"> </span>allocated<span class="w"> </span>resources
salloc:<span class="w"> </span>Granted<span class="w"> </span>job<span class="w"> </span>allocation<span class="w"> </span><span class="m">14507</span>
salloc:<span class="w"> </span>Waiting<span class="w"> </span><span class="k">for</span><span class="w"> </span>resource<span class="w"> </span>configuration
salloc:<span class="w"> </span>Nodes<span class="w"> </span>cs-n0030<span class="w"> </span>are<span class="w"> </span>ready<span class="w"> </span><span class="k">for</span><span class="w"> </span>job
<span class="o">[</span>user@login01<span class="w"> </span>~<span class="o">]</span>$<span class="w"> </span>ssh<span class="w"> </span>cs-n0030
</code></pre></div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
</div>
<p>You will need to setup an SSH key pair and upload the public part
   to SAFE in the usual way to allow SSH login from login
   nodes to compute nodes.</p>
<p>Note the prompt has changed to show you are on a compute node. Once you
are logged in to the compute node, move to a suitable location on <code>/work</code>
as before. You can now create a container from the <code>hello-world.sif</code>
container image file in the same way you did on the login node.</p>
<div class="highlight"><pre><span></span><code><span class="o">[</span>user@cs-n0030<span class="w"> </span>~<span class="o">]</span>$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span><span class="si">${</span><span class="nv">HOME</span><span class="p">/home/work</span><span class="si">}</span>
<span class="o">[</span>user@cs-n0030<span class="w"> </span>~<span class="o">]</span>$<span class="w"> </span>apptainer<span class="w"> </span>shell<span class="w"> </span>hello-world.sif
Apptainer&gt;<span class="w"> </span><span class="nb">exit</span>
<span class="nb">exit</span>
<span class="o">[</span>user@cs-n0030<span class="w"> </span>~<span class="o">]</span>$<span class="w"> </span><span class="nb">exit</span>
<span class="nb">logout</span>
Connection<span class="w"> </span>to<span class="w"> </span>cs-n0030<span class="w"> </span>closed.
<span class="o">[</span>user@login01<span class="w"> </span>~<span class="o">]</span>$<span class="w"> </span><span class="nb">exit</span>
<span class="nb">exit</span>
salloc:<span class="w"> </span>Relinquishing<span class="w"> </span>job<span class="w"> </span>allocation<span class="w"> </span><span class="m">14507</span>
salloc:<span class="w"> </span>Job<span class="w"> </span>allocation<span class="w"> </span><span class="m">14507</span><span class="w"> </span>has<span class="w"> </span>been<span class="w"> </span>revoked.
<span class="o">[</span>user@login01<span class="w"> </span>~<span class="o">]</span>$
</code></pre></div>
<p>We used <code>exit</code> to leave the interactive container shell and then
called <code>exit</code> twice more to close the interactive job on the compute
node.</p>
<h3 id="serial-processes-within-a-non-interactive-batch-script">Serial processes within a non-interactive batch script</h3>
<p>You can also use Apptainer to run containers within a non-interactive batch
script as you would any other command. If your image contains a
<em>runscript</em> then you can use <code>apptainer run</code> to execute the runscript
in the job. You can also use <code>apptainer exec</code> command to execute arbitrary
commands (or scripts) within the image.</p>
<p>An example job submission script to run a serial job that executes the
runscript within the <code>hello-world.sif</code> container image file we downloaded
above on Cirrus would be as follows. Assuming we submit from the same
directory that the <code>ello-world.sif</code> file is stored in/</p>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash --login</span>

<span class="c1"># job options (name, compute nodes, job time)</span>
<span class="kp">#SBATCH --job-name=hello-world</span>
<span class="kp">#SBATCH --ntasks=1</span>
<span class="kp">#SBATCH --exclusive</span>
<span class="kp">#SBATCH --time=0:20:0</span>
<span class="kp">#SBATCH --partition=standard</span>
<span class="kp">#SBATCH --qos=standard</span>

<span class="c1"># Replace [budget code] below with your project code (e.g. t01)</span>
<span class="kp">#SBATCH --account=[budget code]</span>

<span class="c1"># Run the serial executable</span>
<span class="nb">srun</span><span class="w"> </span>--cpu-bind<span class="o">=</span>cores<span class="w"> </span>apptainer<span class="w"> </span>run<span class="w"> </span>hello-world.sif
</code></pre></div>
<p>Submit this script using the <code>sbatch</code> command and once the job has
finished, you should see the same output you got interactively
in the Slurm output file when the job finishes.</p>
<h3 id="parallel-processes-within-a-non-interactive-batch-script">Parallel processes within a non-interactive batch script</h3>
<p>Running a container in parallel on the compute nodes using Apptainer
is not too different from launching a normal parallel application. 
he submission script below shows how the <code>srun</code> command can be used
along with Apptainer to run a container created from a container 
image file in parallel.</p>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash --login</span>

<span class="c1"># job options (name, compute nodes, job time)</span>
<span class="kp">#SBATCH --job-name=[name of application]</span>
<span class="kp">#SBATCH --nodes=4</span>
<span class="kp">#SBATCH --tasks-per-node=36</span>
<span class="kp">#SBATCH --cpus-per-task=1</span>
<span class="kp">#SBATCH --exclusive</span>
<span class="kp">#SBATCH --time=0:20:0</span>
<span class="kp">#SBATCH --partition=standard</span>
<span class="kp">#SBATCH --qos=standard</span>

<span class="c1"># Replace [budget code] below with your project code (e.g. t01)</span>
<span class="kp">#SBATCH --account=[budget code]</span>

<span class="c1"># The host bind paths for the Singularity container.</span>
<span class="nv">BIND_ARGS</span><span class="o">=</span>/work/y07/shared/cirrus-ex,/path/to/input/files

<span class="c1"># The file containing environment variable settings that will allow</span>
<span class="c1"># the container to find libraries on the host, e.g., LD_LIBRARY_PATH . </span>
<span class="nv">ENV_PATH</span><span class="o">=</span>/path/to/container/environment/file

<span class="nv">IMAGE_PATH</span><span class="o">=</span>/path/to/apptainer/image/file

<span class="nv">APP_PATH</span><span class="o">=</span>/path/to/containerized/application/executable
<span class="nv">APP_PARAMS</span><span class="o">=[</span>application<span class="w"> </span>parameters<span class="o">]</span>

<span class="nb">srun</span><span class="w"> </span>--distribution<span class="o">=</span>block:block<span class="w"> </span>--hint<span class="o">=</span>nomultithread<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>singularity<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>--bind<span class="w"> </span><span class="si">${</span><span class="nv">BIND_ARGS</span><span class="si">}</span><span class="w"> </span>--env-file<span class="w"> </span><span class="si">${</span><span class="nv">ENV_PATH</span><span class="si">}</span><span class="w"> </span><span class="si">${</span><span class="nv">IMAGE_PATH</span><span class="si">}</span>
<span class="w">        </span><span class="si">${</span><span class="nv">APP_PATH</span><span class="si">}</span><span class="w"> </span><span class="si">${</span><span class="nv">APP_PARAMS</span><span class="si">}</span>
</code></pre></div>
<p>The script above runs a containerised application such that each of the
four nodes requested is fully populated. In general, the containerised
application's input and output will be read from and written to a
location on the host; hence, it is necessary to pass a suitable bind
path to the <code>apptainer</code> command (<code>/path/to/input/files</code>).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The paths in the submission script that begin <code>/path/to</code> should be
provided by the user. All but one of these paths are locations on the
host (rather than in the running container). The exception being
<code>APP_PATH</code>, which should be given a path relative to the container
file system.</p>
</div>
<h2 id="creating-your-own-apptainer-container-images">Creating your own Apptainer container images</h2>
<p>As we saw above, you can create Apptainer container image files by importing from
DockerHub or other repositories on Cirrus itself. If you wish to create
your own custom container image to use with Apptainer then you must use a system
where you have root (or administrator) privileges - often your own
laptop or workstation.</p>
<p>There are a number of different options to create container images on your local
system to use with Apptainer on Cirrus. We are going to use Podman on our 
local system to create the container image, push the new container image to
Docker Hub and then use Apptainer on Cirrus to convert the Docker container
image to an Apptainer container image file.</p>
<p>For macOS and Windows users we recommend installing Podman Desktop. For Linux
users, we recommend installing Podman directly on your local system. See the
Podman documentation for full details on how to install Podman Desktop/Podman.</p>
<h3 id="building-container-images-using-podman">Building container images using Podman</h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>We assume that you are familiar with using Podman/Docker in these instructions. You 
can find an introduction to Docker at
<a href="https://carpentries-incubator.github.io/docker-introduction/">Reproducible Computational Environments Using Containers: Introduction to Docker</a>.
Podman uses very similar commands to Docker.</p>
</div>
<p>As usual, you can build container images with a command similar to:</p>
<div class="highlight"><pre><span></span><code>podman<span class="w"> </span>build<span class="w"> </span>--platform<span class="w"> </span>linux/amd64<span class="w"> </span>-t<span class="w"> </span>&lt;username&gt;/&lt;image<span class="w"> </span>name&gt;:&lt;version&gt;<span class="w"> </span>.
</code></pre></div>
<p>Where:</p>
<ul>
<li><code>&lt;username&gt;</code> is your Docker Hub username</li>
<li><code>&lt;image name&gt;</code> is the name of the container image you wish to create</li>
<li><code>&lt;version&gt;</code> - specifies the version of the image you are creating (e.g. "latest", "v1")</li>
<li><code>.</code> is the <em>build context</em> - in this example it is the location of the Dockerfile</li>
</ul>
<p>Note, you should use the <code>--platform linux/amd64</code> option to ensure that the container
image is compatible with the processor architecture on Cirrus.</p>
<h2 id="using-apptainer-with-mpi-on-cirrus">Using Apptainer with MPI on Cirrus</h2>
<p>MPI on Cirrus is provided by the Cray MPICH libraries with the interface
to the high-performance Slingshot interconnect provided via the OFI interface.
Therefore, as per the <a href="https://apptainer.org/docs/user/latest/mpi.html#hybrid-model">Apptainer MPI Hybrid model</a>, we will build our container image such that it contains a version of the MPICH MPI library compiled with support for OFI.
Below, we provide instructions on creating a container image with
a version of MPICH compiled in this way. We then provide an 
example of how to run an Apptainer container with MPI over multiple 
Cirrus compute nodes.</p>
<h3 id="building-an-image-with-mpi-from-scratch">Building an image with MPI from scratch</h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Remember, all these steps should be executed on your local system where
you have administrator privileges and Podman installed, <strong>not on Cirrus</strong>.</p>
</div>
<p>We will illustrate the process of building an Apptainer container image with MPI from
scratch by building a container image that contains MPI provided by MPICH and the OSU
MPI benchmarks. As part of the container image creation we need to download the source code
for both MPICH and the OSU benchmarks. At the time of writing, the stable MPICH 3
release is 3.4.3 and the stable OSU benchmark release is 7.5.1 - this may have
changed by the time you are following these instructions.</p>
<p>First, create a Dockerfile that describes how to build the image:</p>
<div class="highlight"><pre><span></span><code><span class="k">FROM</span><span class="w"> </span><span class="s">ubuntu:22.04</span>

<span class="k">ENV</span><span class="w"> </span><span class="nv">DEBIAN_FRONTEND</span><span class="o">=</span>noninteractive

<span class="c"># Install the necessary packages (from repo)</span>
<span class="k">RUN</span><span class="w"> </span>apt-get<span class="w"> </span>update<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>--no-install-recommends<span class="w"> </span><span class="se">\</span>
<span class="w"> </span>apt-utils<span class="w"> </span><span class="se">\</span>
<span class="w"> </span>build-essential<span class="w"> </span><span class="se">\</span>
<span class="w"> </span>curl<span class="w"> </span><span class="se">\</span>
<span class="w"> </span>libcurl4-openssl-dev<span class="w"> </span><span class="se">\</span>
<span class="w"> </span>libzmq3-dev<span class="w"> </span><span class="se">\</span>
<span class="w"> </span>pkg-config<span class="w"> </span><span class="se">\</span>
<span class="w"> </span>software-properties-common
<span class="k">RUN</span><span class="w"> </span>apt-get<span class="w"> </span>clean
<span class="k">RUN</span><span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>dkms
<span class="k">RUN</span><span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>autoconf<span class="w"> </span>automake<span class="w"> </span>build-essential<span class="w"> </span>numactl<span class="w"> </span>libnuma-dev<span class="w"> </span>autoconf<span class="w"> </span>automake<span class="w"> </span>gcc<span class="w"> </span>g++<span class="w"> </span>git<span class="w"> </span>libtool

<span class="c"># Download and build an ABI compatible MPICH</span>
<span class="k">RUN</span><span class="w"> </span>curl<span class="w"> </span>-sSLO<span class="w"> </span>http://www.mpich.org/static/downloads/3.4.2/mpich-3.4.2.tar.gz<span class="w"> </span><span class="se">\</span>
<span class="w">   </span><span class="o">&amp;&amp;</span><span class="w"> </span>tar<span class="w"> </span>-xzf<span class="w"> </span>mpich-3.4.2.tar.gz<span class="w"> </span>-C<span class="w"> </span>/root<span class="w"> </span><span class="se">\</span>
<span class="w">   </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">cd</span><span class="w"> </span>/root/mpich-3.4.2<span class="w"> </span><span class="se">\</span>
<span class="w">   </span><span class="o">&amp;&amp;</span><span class="w"> </span>./configure<span class="w"> </span>--prefix<span class="o">=</span>/usr<span class="w"> </span>--with-device<span class="o">=</span>ch4:ofi<span class="w"> </span>--disable-fortran<span class="w"> </span><span class="se">\</span>
<span class="w">   </span><span class="o">&amp;&amp;</span><span class="w"> </span>make<span class="w"> </span>-j8<span class="w"> </span>install<span class="w"> </span><span class="se">\</span>
<span class="w">   </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">cd</span><span class="w"> </span>/<span class="w"> </span><span class="se">\</span>
<span class="w">   </span><span class="o">&amp;&amp;</span><span class="w"> </span>rm<span class="w"> </span>-rf<span class="w"> </span>/root/mpich-3.4.2<span class="w"> </span><span class="se">\</span>
<span class="w">   </span><span class="o">&amp;&amp;</span><span class="w"> </span>rm<span class="w"> </span>/mpich-3.4.2.tar.gz

<span class="c"># OSU benchmarks</span>
<span class="k">RUN</span><span class="w"> </span>curl<span class="w"> </span>-sSLO<span class="w"> </span>http://mvapich.cse.ohio-state.edu/download/mvapich/osu-micro-benchmarks-7.5.1.tar.gz<span class="w"> </span><span class="se">\</span>
<span class="w">   </span><span class="o">&amp;&amp;</span><span class="w"> </span>tar<span class="w"> </span>-xzf<span class="w"> </span>osu-micro-benchmarks-7.5.1.tar.gz<span class="w"> </span>-C<span class="w"> </span>/root<span class="w"> </span><span class="se">\</span>
<span class="w">   </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">cd</span><span class="w"> </span>/root/osu-micro-benchmarks-7.5.1<span class="w"> </span><span class="se">\</span>
<span class="w">   </span><span class="o">&amp;&amp;</span><span class="w"> </span>./configure<span class="w"> </span>--prefix<span class="o">=</span>/usr/local<span class="w"> </span><span class="nv">CC</span><span class="o">=</span>/usr/bin/mpicc<span class="w"> </span><span class="nv">CXX</span><span class="o">=</span>/usr/bin/mpicxx<span class="w"> </span><span class="se">\</span>
<span class="w">   </span><span class="o">&amp;&amp;</span><span class="w"> </span>make<span class="w"> </span>-j8<span class="w"> </span>install<span class="w"> </span><span class="se">\</span>
<span class="w">   </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">cd</span><span class="w"> </span>/<span class="w"> </span><span class="se">\</span>
<span class="w">   </span><span class="o">&amp;&amp;</span><span class="w"> </span>rm<span class="w"> </span>-rf<span class="w"> </span>/root/osu-micro-benchmarks-7.5.1<span class="w"> </span><span class="se">\</span>
<span class="w">   </span><span class="o">&amp;&amp;</span><span class="w"> </span>rm<span class="w"> </span>/osu-micro-benchmarks-7.5.1.tar.gz

<span class="c"># Add the OSU benchmark executables to the PATH</span>
<span class="k">ENV</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span>/usr/local/libexec/osu-micro-benchmarks/mpi/startup:<span class="nv">$PATH</span>
<span class="k">ENV</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span>/usr/local/libexec/osu-micro-benchmarks/mpi/pt2pt:<span class="nv">$PATH</span>
<span class="k">ENV</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span>/usr/local/libexec/osu-micro-benchmarks/mpi/collective:<span class="nv">$PATH</span>
<span class="k">ENV</span><span class="w"> </span><span class="nv">OSU_DIR</span><span class="o">=</span>/usr/local/libexec/osu-micro-benchmarks/mpi

<span class="c"># path to mlx IB libraries in Ubuntu</span>
<span class="k">ENV</span><span class="w"> </span><span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span>/usr/lib/libibverbs:<span class="nv">$LD_LIBRARY_PATH</span>
</code></pre></div>
<p>A quick overview of what the above Dockerfile is doing:</p>
<ul>
<li>The image is being bootstrapped from the <code>ubuntu:22.04</code> Docker image (this contains GLIBC compatible with the Cirrus Linux kernel).</li>
<li>The first set of <code>RUN</code> sections with <code>apt-get</code> commands: install the base packages required from the Ubuntu package repos</li>
<li>MPICH install: downloads and compiles the MPICH 3.4.3 in a way that is compatible with Cray MPICH on ARCHER2</li>
<li>OSU MPI benchmarks install: downloads and compiles the OSU micro benchmarks</li>
<li><code>ENV</code> sections: add the OSU benchmark executables to the PATH so they can be executed in the container without specifying the full path; set the correct paths to the network libraries within the container.</li>
</ul>
<p>Now we can go ahead and build the container image using Podman (this assumes that
you issue the command in the same directory as the Dockerfile you created based on
the specification above):</p>
<div class="highlight"><pre><span></span><code>podman<span class="w"> </span>build<span class="w"> </span>--platform<span class="w"> </span>linux/amd64<span class="w"> </span>-t<span class="w"> </span>auser/osu-benchmarks:7.5.1<span class="w"> </span>.
</code></pre></div>
<p>(Remember to change <code>auser</code> to your Dockerhub username.)</p>
<p>Once you have successfully built your container image, you should push it to
Dockerhub:</p>
<div class="highlight"><pre><span></span><code>podman<span class="w"> </span>push<span class="w"> </span>auser/osu-benchmarks:7.5.1
</code></pre></div>
<p>Finally, you need to use Apptainer on Cirrus to convert the Docker container image
to an Apptainer container image file. Log into Cirrus, move to the work file system
and then use a command like:</p>
<div class="highlight"><pre><span></span><code>auser@login01:/work/t01/t01/auser&gt;<span class="w"> </span>apptainer<span class="w"> </span>build<span class="w"> </span>osu-benchmarks-7.5.1.sif<span class="w"> </span>docker://auser/osu-benchmarks:7.5.1
</code></pre></div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>You can find a copy of the <code>osu-benchmarks_7.5.1.sif</code> image on Cirrus in the directory
<code>$EPCC_CONTAINER_DIR</code> if you do not want to build it yourself but still want to
test.</p>
</div>
<h3 id="running-parallel-mpi-jobs-using-apptainer-containers">Running parallel MPI jobs using Apptainer containers</h3>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>These instructions assume you have built an Apptainer container image file on 
Cirrus that includes MPI provided by MPICH with the OFI interface.
See the sections above for how to build such container images.</p>
</div>
<p>Once you have built your Apptainer container image file that includes MPICH built with
OFI for ARCHER2, you can use it to run parallel jobs in a similar way to
non-Apptainer jobs. The example job submission script below uses the container image file
we built above with MPICH and the OSU benchmarks to run the Allreduce benchmark
on two nodes where all 288 cores on each node are used for MPI processes (so, 576
MPI processes in total).</p>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>

<span class="c1">#SBATCH --job-name=apptainer_parallel</span>
<span class="c1">#SBATCH --time=0:10:0</span>
<span class="c1">#SBATCH --exclusive</span>
<span class="c1">#SBATCH --nodes=2</span>
<span class="c1">#SBATCH --ntasks-per-node=288</span>
<span class="c1">#SBATCH --cpus-per-task=1</span>

<span class="c1">#SBATCH --partition=standard</span>
<span class="c1">#SBATCH --qos=standard</span>
<span class="c1">#SBATCH --account=[budget code]</span>

<span class="c1"># Load the module to make the Cray MPICH ABI available</span>
module<span class="w"> </span>load<span class="w"> </span>cray-mpich-abi/8.1.32

<span class="nb">export</span><span class="w"> </span><span class="nv">OMP_NUM_THREADS</span><span class="o">=</span><span class="m">1</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">SRUN_CPUS_PER_TASK</span><span class="o">=</span><span class="nv">$SLURM_CPUS_PER_TASK</span>

<span class="c1"># Set the LD_LIBRARY_PATH environment variable within the container</span>
<span class="c1"># to ensure that it used the correct MPI libraries.</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">APPTAINERENV_LD_LIBRARY_PATH</span><span class="o">=</span><span class="s2">&quot;/opt/cray/pe/mpich/8.1.32/ofi/gnu/11.2/lib-abi-mpich:/opt/cray/libfabric/1.22.0/lib64:/opt/cray/pals/1.6/lib:/opt/cray/pe/lib64:/opt/xpmem/lib64:/lib64&quot;</span>

<span class="c1"># This makes sure HPE Cray Slingshot interconnect libraries are available</span>
<span class="c1"># from inside the container.</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">APPTAINER_BIND</span><span class="o">=</span><span class="s2">&quot;/opt/cray,/var/spool,/opt/cray/pe/mpich/8.1.32/ofi/gnu/11.2/lib-abi-mpich,/etc/host.conf,/etc/libibverbs.d/mlx5.driver,/etc/libnl/classid,/etc/resolv.conf,/opt/cray/libfabric/1.22.0/lib64/libfabric.so.1,/lib64/libatomic.so.1,/lib64/libgcc_s.so.1,/lib64/libgfortran.so.5,/lib64/libquadmath.so.0,/opt/cray/pals/1.6/lib/libpals.so.0,/opt/cray/pe/lib64/libpmi2.so.0,/opt/cray/pe/lib64/libpmi.so.0,/opt/xpmem/lib64/libxpmem.so.0,/run/munge/munge.socket.2,/lib64/libmunge.so.2,/lib64/libnl-3.so.200,/lib64/libnl-genl-3.so.200,/lib64/libnl-route-3.so.200,/lib64/librdmacm.so.1,/lib64/libcxi.so.1,/lib64/libm.so.6&quot;</span>

<span class="c1"># Launch the parallel job.</span>
srun<span class="w"> </span>--hint<span class="o">=</span>nomultithread<span class="w"> </span>--distribution<span class="o">=</span>block:block<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>apptainer<span class="w"> </span>run<span class="w"> </span>osu-benchmarks-7.5.1.sif<span class="w"> </span><span class="se">\</span>
<span class="w">        </span>osu_allreduce
</code></pre></div>
<p>The only changes from a standard submission script are:</p>
<ul>
<li>We set the environment variable <code>APPTAINER_LD_LIBRARY_PATH</code> to ensure that the excutable can find the correct libraries are available within the container to be able to use HPE Cray Slingshot interconnect.</li>
<li>We set the environment variable <code>APPTAINER_BIND</code> to ensure that the correct libraries are available within the container to be able to use HPE Cray Slingshot interconnect.</li>
<li><code>srun</code> calls the <code>apptainer</code> software with the container image file we created rather than the parallel program directly.</li>
</ul>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Remember that the image file must be located on <code>/work</code> to run jobs on the
compute nodes.</p>
</div>
<p>If the job runs correctly, you should see output similar to the following in your <code>slurm-*.out</code> 
file:</p>
<div class="highlight"><pre><span></span><code>Lmod is automatically replacing &quot;cray-mpich/8.1.32&quot; with
&quot;cray-mpich-abi/8.1.32&quot;.


# OSU MPI Allreduce Latency Test v7.5
# Datatype: MPI_INT.
# Size       Avg Latency(us)
4                      10.05
8                      10.84
16                     11.19
32                     11.49
64                     13.08
128                    17.09
256                    22.97
512                    22.23
1024                   23.24
2048                   26.16
4096                   60.79
8192                   75.56
16384                  80.11
32768                 120.08
65536                 214.08
131072                378.17
262144                764.93
524288                515.50
1048576              1064.92
</code></pre></div>









  




                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/EPCCed" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["tabs"], "search": "../../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.e71a0d61.min.js"></script>
      
    
  </body>
</html>